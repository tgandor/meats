<!DOCTYPE html>
<html>
<head>
    <title>JavaScript calculator</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript">
        function run() {
            var expr = document.getElementById('expr').value;
            // close unclosed parentheses
            var unbalance = expr.split('(').length - expr.split(')').length;
            if (unbalance > 0) {
                expr += Array(unbalance + 1).join(')');
                document.getElementById('expr').value = expr;
            }
            try { document.getElementById('result').textContent = (eval(expr)); }
            catch(e) { alert(e); }
        }
        function append(x) { document.getElementById('expr').value += x.value; }
        function appendv(x) { document.getElementById('expr').value += x; }
        function backsp() { x = document.getElementById('expr').value; document.getElementById('expr').value = x.substr(0, x.length-1); }
    </script>
    <style type="text/css">
    input {
        width: 3em;
    }
    #expr {
        width: 16em;
    }
    </style>
</head>
<body>
    <input type="text" id="expr" value="" />
    <input type="button" value="=" onclick="run()" />
    <span id="result">0</span>
    <table>
        <tr>
            <td><input type="button" value="1" onclick="append(this)" /></td>
            <td><input type="button" value="2" onclick="append(this)" /></td>
            <td><input type="button" value="3" onclick="append(this)" /></td>
            <td><input type="button" value="C" onclick="backsp()" /></td>
            <td><input type="button" value="AC" onclick="document.getElementById('expr').value = ('')" /></td>
            <td><input type="button" value="ANS" onclick="document.getElementById('expr').value = document.getElementById('result').textContent" /></td>
        </tr>
        <tr>
            <td><input type="button" value="4" onclick="append(this)" /></td>
            <td><input type="button" value="5" onclick="append(this)" /></td>
            <td><input type="button" value="6" onclick="append(this)" /></td>
            <td><input type="button" value="+" onclick="append(this)" /></td>
            <td><input type="button" value="-" onclick="append(this)" /></td>
            <td><input type="button" value="%" onclick="append(this)" title="modulo" /></td>
        </tr>
        <tr>
            <td><input type="button" value="7" onclick="append(this)" /></td>
            <td><input type="button" value="8" onclick="append(this)" /></td>
            <td><input type="button" value="9" onclick="append(this)" /></td>
            <td><input type="button" value="*" onclick="append(this)" /></td>
            <td><input type="button" value="/" onclick="append(this)" /></td>
            <td><input type="button" value="&radic;" onclick="appendv('Math.sqrt(')" /></td>
        </tr>
        <tr>
            <td><input type="button" value="." onclick="append(this)" /></td>
            <td><input type="button" value="0" onclick="append(this)" /></td>
            <td><input type="button" value="e" onclick="append(this)" /></td>
            <td><input type="button" value="(" onclick="append(this)" /></td>
            <td><input type="button" value=")" onclick="append(this)" /></td>
            <td><input type="button" value="&pi;" onclick="appendv('Math.PI')" /></td>
        </tr>
    </table>
</body>
</html>
